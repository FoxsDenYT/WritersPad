<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]>      <html class="no-js"> <!--<![endif]-->
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>WritersPad</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        :root {
            --thumbIndex: -1;
        }

        body {
            padding: 0px;
            margin: 0px;
            display: flex;
            min-height: 100vh;
            flex-direction: column;

        }

        select {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            margin: 5px;
            border-radius: 10px;
            padding: 3px;
            display: inline-block;
            --thumbIndex: -999;
        }

        #filemenu_container {
            overflow: hidden;
        }

        textarea {
            width: 100vw;

            padding: 0px;
            margin: 0px;
            border-left: 0px;
            border-right: 0px;
            border-bottom: 0px;
            resize: none;
            flex: 1;
            outline: 0px;
        }
        .toastify{
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        background-color: red !important;
        background: red !important;

        }
    </style>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
</head>

<body>
    <!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]--><input hidden id="myFile" type="file"></input>
    <div>
        <select id="fmenu" title="menu" onchange="menuselected('fmenu')">
            <option selected disabled>File</option>
            <option value=0>Open</option>
            <option value=1>Save</option>
        </select><select id="emenu" title="menu" onchange="menuselected('emenu')">
            <option selected disabled>Edit</option>
            <option>File</option>
        </select><select id="vmenu" title="menu" onchange="menuselected('vmenu')">
            <option selected disabled>View</option>
            <option>File</option>
        </select><select id="amenu" title="menu" onchange="menuselected('amenu')">
            <option selected disabled>About</option>
            <option>File</option>
        </select>


    </div>
    <textarea id="txtarea"></textarea>
    <script>
        function download(filename, text) {
            var element = document.createElement('a');
            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
            element.setAttribute('download', filename);

            element.style.display = 'none';
            document.body.appendChild(element);

            element.click();

            document.body.removeChild(element);
        }
        var menufunctions = {
            "0": function () {
                document.querySelector("#myFile").click();
            },
            "1": function () {
                download(prompt("Filename?", "*.txt"), document.getElementById("txtarea").textContent);
            }
        }
        var myFile = document.getElementById("myFile");
        var fileOutput = document.getElementById("txtarea");
        myFile.addEventListener('change', function () {
            var fileReader = new FileReader();
            fileReader.onload = function () {
                fileOutput.textContent = fileReader.result;
            }
            fileReader.readAsText(this.files[0]);
        })
        function menuselected(menu) {
            alert('Menus selected: ' + menu + "\nItem selected:" + document.getElementById(menu).value)
            menufunctions[document.getElementById(menu).value]();
            document.getElementById(menu).selectedIndex = 0
        }
        var interval;
        var startedTime;
        var timesShown = 0
        function docheck() {
            timesShown = timesShown + 1;
            var difference = getTimestampInSeconds() - startedTime;
            if (difference > 3) {
                Toastify({
                    text: "GET WRITING BOZO",
                    duration: 1000,
                    close: false,
                    gravity: "bottom", // `top` or `bottom`
                    position: "center", // `left`, `center` or `right`
                    stopOnFocus: true, // Prevents dismissing of toast on hover
                    style: {
                        "font-size": "xxx-large",
                        "font-family": "inherit",
                        "background-color": "red"
                    },
                    onClick: function () { } // Callback after click
                }).showToast();
                if(timesShown < 4){
                    
                    intervall = setInterval(docheck, 1000)
                }
                else{clearInterval(intervall)
                    var timesShown = 0}
                clearInterval(interval)

            }
            clearInterval(interval)
        }
        function getTimestampInSeconds() {
            return Math.floor(Date.now() / 1000)
        }

        document.onkeypress = function (event) {
            clearInterval(interval)
            console.log("Key: " + event.key);
            startedTime = getTimestampInSeconds();
            setInterval(docheck, 5000);

        }
    </script>
    <script src="" async defer></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
</body>

</html>